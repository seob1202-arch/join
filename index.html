<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kornect - ì—…ì²´ ë“±ë¡ ë° ìˆ˜ì •</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #f9fafb; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card-shadow { box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08); }
        .radio-option { transition: all 0.2s ease; border: 2px solid #e5e7eb; }
        .radio-option:hover { border-color: #8b5cf6; transform: translateY(-2px); }
        .radio-option input:checked + label { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-color: transparent; }
        .radio-option input:checked + label svg { color: white; }
        .modal-bg { background-color: rgba(0, 0, 0, 0.5); backdrop-filter: blur(2px); }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #7c3aed; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        /* ì¶”ê°€ ì»¤ìŠ¤í…€ ìœ í‹¸ë¦¬í‹°: í•œê¸€ ë‹¨ì–´ ì¤„ë°”ê¿ˆ ë°©ì§€ */
        .break-keep { word-break: keep-all; }
    </style>
</head>
<body class="text-gray-800">
    <div id="loadingOverlay" class="fixed inset-0 modal-bg z-50 hidden flex flex-col justify-center items-center">
        <div class="bg-white p-6 rounded-2xl shadow-xl flex flex-col items-center">
            <div class="loader mb-4"></div>
            <p class="text-gray-600 font-medium">ë°ì´í„°ë¥¼ ì•ˆì „í•˜ê²Œ ì €ì¥ ì¤‘ì…ë‹ˆë‹¤...</p>
        </div>
    </div>
    <div id="warningModal" class="fixed inset-0 modal-bg z-40 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl p-8 max-w-sm w-full card-shadow transform transition-all scale-100">
            <div class="text-center">
                <div class="bg-yellow-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
                    <svg class="w-8 h-8 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
                </div>
                <h3 class="text-xl font-bold text-gray-800 mb-2">ì†Œìœ ì£¼ í™•ì¸ í•„ìš”</h3>
                <p class="text-gray-500 mb-6 text-sm break-keep">ë³¸ ì—…ì²´ì˜ ì†Œìœ ì£¼ë§Œ ì •ë³´ ìˆ˜ì • ë° ì‚­ì œ ìš”ì²­ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ê³„ì† í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
                <div class="flex gap-3">
                    <button onclick="closeModal(false)" class="flex-1 bg-gray-200 text-gray-700 py-3 rounded-xl font-medium hover:bg-gray-300 transition">ì·¨ì†Œ</button>
                    <button onclick="closeModal(true)" class="flex-1 gradient-bg text-white py-3 rounded-xl font-medium hover:opacity-90 transition shadow-lg">í™•ì¸</button>
                </div>
            </div>
        </div>
    </div>
    <div id="successModal" class="fixed inset-0 modal-bg z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl p-8 max-w-sm w-full card-shadow transform transition-all scale-100">
            <div class="text-center">
                <div class="bg-green-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
                    <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                </div>
                <h3 class="text-xl font-bold text-gray-800 mb-2">ì ‘ìˆ˜ ì™„ë£Œ</h3>
                <div class="text-gray-500 mb-6 text-sm break-keep space-y-1">
                    <p id="successMessageText">ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                    <p class="text-xs text-purple-600 font-medium animate-pulse">ì ì‹œ í›„ ì°½ì´ ìë™ìœ¼ë¡œ ë‹«í™ë‹ˆë‹¤...</p>
                </div>
                <button onclick="forceCloseWindow()" class="w-full bg-gray-100 text-gray-600 py-3 rounded-xl font-medium hover:bg-gray-200 transition">ì§€ê¸ˆ ë‹«ê¸°</button>
            </div>
        </div>
    </div>

    <div class="min-h-screen py-10 px-4">
        <div class="max-w-xl mx-auto">
            <div class="bg-white rounded-3xl card-shadow pt-8 pb-8 px-6 mb-6 text-center">
                <img src="https://drive.google.com/thumbnail?id=1FoWG_L4oKEw-FDk6-kO6KY_6E8rU_mig&sz=w1000" alt="Kornect Logo" class="h-28 mx-auto object-contain mb-4">
                <p class="text-gray-500 text-sm leading-relaxed break-keep">
                    "ë„“íˆë‹¤, ì•Œë¦¬ë‹¤, ê·¸ë¦¬ê³  ë¬´ë£Œë¡œ ëˆ„ë¦¬ë‹¤."
                    <br><span class="text-purple-600 font-medium">ë‹¹ì‹ ì˜ ë¹„ì¦ˆë‹ˆìŠ¤! ì§€ê¸ˆ ë°”ë¡œ ë“±ë¡í•˜ì„¸ìš”.</span>
                </p>
            </div>
            
            <div class="bg-indigo-50 border border-indigo-100 rounded-3xl p-6 mb-6 flex flex-col md:flex-row items-center md:justify-between gap-4 md:gap-6 card-shadow">
                <div class="text-center md:text-left w-full md:w-auto">
                    <h3 class="font-bold text-indigo-900 text-lg break-keep leading-snug">
                        <span class="mr-1">ğŸš€</span>í™ë³´ìš© ëœë”©í˜ì´ì§€ <span class="text-indigo-600">ë¬´ë£Œ ì œì‘</span>
                    </h3>
                    <p class="text-indigo-600 text-sm mt-2 font-medium break-keep leading-snug">
                        ì§€ê¸ˆ ì‹ ì²­í•˜ê³  ë¹„ì¦ˆë‹ˆìŠ¤ë¥¼ ì„±ì¥ì‹œí‚¤ì„¸ìš”!
                    </p>
                </div>
                <a href="https://littlespoon-kornect.netlify.app/" target="_blank" class="w-full md:w-auto shrink-0 bg-white text-indigo-600 text-sm font-bold py-3 md:py-2.5 px-5 rounded-xl border border-indigo-200 shadow-sm hover:bg-indigo-100 transition text-center">
                    ì˜ˆì‹œë³´ê¸° >
                </a>
            </div>

            <div class="bg-white rounded-3xl card-shadow p-6 mb-6">
                <h2 class="text-lg font-bold text-gray-800 mb-4 text-center">ì›í•˜ì‹œëŠ” ì„œë¹„ìŠ¤ë¥¼ ì„ íƒí•˜ì„¸ìš”</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                    <div class="radio-option rounded-xl overflow-hidden cursor-pointer relative">
                        <input type="radio" name="mainOption" id="optionNew" value="new" class="hidden peer" checked>
                        <label for="optionNew" class="block p-4 cursor-pointer text-center h-full flex flex-col justify-center items-center min-h-[120px]">
                            <svg class="w-8 h-8 mb-2 text-gray-400 peer-checked:text-white transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
                            <span class="font-semibold text-sm block">ì‹ ê·œ ì—…ì²´<br>ë“±ë¡</span>
                        </label>
                    </div>
                    <div class="radio-option rounded-xl overflow-hidden cursor-pointer relative">
                        <input type="radio" name="mainOption" id="optionEdit" value="edit" class="hidden peer">
                        <label for="optionEdit" onclick="handleEditClick(event)" class="block p-4 cursor-pointer text-center h-full flex flex-col justify-center items-center min-h-[120px]">
                            <svg class="w-8 h-8 mb-2 text-gray-400 peer-checked:text-white transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
                            <span class="font-semibold text-sm block">ì •ë³´ ìˆ˜ì •<br>/ì‚­ì œ</span>
                        </label>
                    </div>
                    <div class="radio-option rounded-xl overflow-hidden cursor-pointer relative">
                        <input type="radio" name="mainOption" id="optionLanding" value="landing" class="hidden peer">
                        <label for="optionLanding" class="block p-4 cursor-pointer text-center h-full flex flex-col justify-center items-center min-h-[120px]">
                            <svg class="w-8 h-8 mb-2 text-gray-400 peer-checked:text-white transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            <span class="font-semibold text-sm block">ëœë”©í˜ì´ì§€<br>ì‹ ì²­ (ë¬´ë£Œ)</span>
                        </label>
                    </div>
                </div>
            </div>
            
            <form id="mainForm" class="bg-white rounded-3xl card-shadow p-8 relative overflow-hidden">
                <div class="absolute top-0 left-0 w-full h-2 gradient-bg"></div>

                <div id="newRegistrationForm" class="space-y-6">
                    <h3 class="text-xl font-bold text-gray-800 pb-2 border-b border-gray-100">ğŸ“ ì‹ ê·œ ë“±ë¡ ì •ë³´</h3>
                    <div><label class="block text-sm font-bold text-gray-700 mb-2">ì—…ì²´ëª… <span class="text-red-500">*</span></label><input type="text" name="businessName" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:bg-white transition outline-none" placeholder="ìƒí˜¸ëª…ì„ ì…ë ¥í•˜ì„¸ìš”"></div>
                    <div><label class="block text-sm font-bold text-gray-700 mb-2">ì‚¬ì—…ì¥ ì£¼ì†Œ <span class="text-red-500">*</span></label><input type="text" name="address" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:bg-white transition outline-none" placeholder="Google Maps ê²€ìƒ‰ ê°€ëŠ¥í•œ ì£¼ì†Œ"></div>
                    
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-3">ì˜ì—…ì‹œê°„ <span class="text-red-500">*</span></label>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                             <div class="bg-blue-50 border border-blue-100 p-4 rounded-2xl flex flex-col items-center justify-center relative shadow-sm">
                                <span class="absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-blue-600 text-white text-[10px] font-bold px-3 py-1 rounded-full shadow-sm tracking-wider">OPEN</span>
                                <div class="flex items-center gap-1 mt-2">
                                    <select name="openHour" class="appearance-none bg-transparent text-2xl font-bold text-gray-800 text-center outline-none focus:text-blue-600 transition cursor-pointer p-0 w-12"><option value="">10</option></select>
                                    <span class="text-xl font-bold text-gray-400 pb-1">:</span>
                                    <select name="openMinute" class="appearance-none bg-transparent text-2xl font-bold text-gray-800 text-center outline-none focus:text-blue-600 transition cursor-pointer p-0 w-12"><option value="">00</option></select>
                                    <select name="openPeriod" class="appearance-none bg-white border border-blue-200 text-xs font-bold text-blue-600 rounded-md px-2 py-1 ml-1 outline-none shadow-sm"><option value="AM">AM</option><option value="PM">PM</option></select>
                                </div>
                             </div>
                             <div class="bg-gray-50 border border-gray-200 p-4 rounded-2xl flex flex-col items-center justify-center relative shadow-sm">
                                <span class="absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gray-600 text-white text-[10px] font-bold px-3 py-1 rounded-full shadow-sm tracking-wider">CLOSE</span>
                                <div class="flex items-center gap-1 mt-2">
                                    <select name="closeHour" class="appearance-none bg-transparent text-2xl font-bold text-gray-800 text-center outline-none focus:text-purple-600 transition cursor-pointer p-0 w-12"><option value="">08</option></select>
                                    <span class="text-xl font-bold text-gray-400 pb-1">:</span>
                                    <select name="closeMinute" class="appearance-none bg-transparent text-2xl font-bold text-gray-800 text-center outline-none focus:text-purple-600 transition cursor-pointer p-0 w-12"><option value="">00</option></select>
                                    <select name="closePeriod" class="appearance-none bg-white border border-gray-300 text-xs font-bold text-gray-600 rounded-md px-2 py-1 ml-1 outline-none shadow-sm"><option value="PM" selected>PM</option><option value="AM">AM</option></select>
                                </div>
                             </div>
                        </div>
                    </div>
                    <div><label class="block text-sm font-bold text-gray-700 mb-2">ì—…ì¢… <span class="text-red-500">*</span></label><input type="text" name="industry" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none" placeholder="ì˜ˆ: í•œì‹ë‹¹, ìœ í•™ì›"></div>
                    <div><label class="block text-sm font-bold text-gray-700 mb-2">ëŒ€í‘œ ì„œë¹„ìŠ¤ <span class="text-red-500">*</span></label><input type="text" name="mainService" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none" placeholder="ì˜ˆ: ê¹€ë°¥, ë²•ì¸ì„¤ë¦½"></div>
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">ëŒ€í‘œ ì´ë¯¸ì§€ <span class="text-red-500">*</span></label>
                        <div class="relative border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:bg-gray-50 transition cursor-pointer group">
                            <input type="file" name="image" accept="image/*" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" onchange="previewFile(this)">
                            <div id="uploadPlaceholder"><svg class="w-10 h-10 text-gray-400 mx-auto mb-2 group-hover:text-purple-500 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg><p class="text-sm text-gray-500">í„°ì¹˜í•˜ì—¬ ì‚¬ì§„ ì—…ë¡œë“œ</p></div>
                            <img id="imagePreview" class="hidden max-h-40 mx-auto rounded-lg shadow-md object-cover">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div><label class="block text-sm font-bold text-gray-700 mb-2">ì—°ë½ì²˜ <span class="text-red-500">*</span></label><input type="tel" name="phone" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none"></div>
                        <div><label class="block text-sm font-bold text-gray-700 mb-2">ì´ë©”ì¼</label><input type="email" name="email" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none"></div>
                    </div>
                    <div><label class="block text-sm font-bold text-gray-700 mb-2">í™ˆí˜ì´ì§€ / SNS</label><input type="url" name="website" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none" placeholder="https://..."></div>
                    <div><label class="block text-sm font-bold text-gray-700 mb-2">ì¹´ì¹´ì˜¤í†¡ ID</label><input type="text" name="kakao" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none"></div>
                </div>

                <div id="editRequestForm" class="space-y-6 hidden">
                    <h3 class="text-xl font-bold text-gray-800 pb-2 border-b border-gray-100">ğŸ”’ ì†Œìœ ì£¼ ì¸ì¦ ë° ìš”ì²­</h3>
                    <div class="flex bg-gray-100 p-1 rounded-xl">
                        <label class="flex-1 text-center py-2 rounded-lg cursor-pointer transition-all has-[:checked]:bg-white has-[:checked]:shadow-sm has-[:checked]:text-purple-700"><input type="radio" name="editType" value="modify" class="hidden" checked onchange="toggleEditType()"><span class="text-sm font-bold">ì •ë³´ ìˆ˜ì •</span></label>
                        <label class="flex-1 text-center py-2 rounded-lg cursor-pointer transition-all has-[:checked]:bg-white has-[:checked]:shadow-sm has-[:checked]:text-red-600"><input type="radio" name="editType" value="delete" class="hidden" onchange="toggleEditType()"><span class="text-sm font-bold">ì •ë³´ ì‚­ì œ</span></label>
                    </div>
                    <div class="space-y-4">
                        <input type="text" name="editBusinessName" placeholder="ì—…ì²´ëª… *" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-purple-500">
                        <input type="text" name="editAddress" placeholder="ì‚¬ì—…ì¥ ì£¼ì†Œ *" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-purple-500">
                        <input type="text" name="editOwner" placeholder="ëŒ€í‘œì ì„±í•¨ (ì†Œìœ ì£¼) *" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-purple-500">
                        <div class="grid grid-cols-2 gap-4">
                            <input type="tel" name="editPhone" placeholder="ì—°ë½ì²˜ *" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-purple-500">
                            <input type="email" name="editEmail" placeholder="ì´ë©”ì¼ *" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-purple-500">
                        </div>
                    </div>
                    <div id="modifyDetails"><label class="block text-sm font-bold text-gray-700 mb-2">ìˆ˜ì • ìš”ì²­ì‚¬í•­ <span class="text-red-500">*</span></label><textarea name="modifyRequest" rows="3" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-purple-500" placeholder="ë³€ê²½í•  ë‚´ìš©ì„ ìì„¸íˆ ì ì–´ì£¼ì„¸ìš”."></textarea></div>
                    <div id="deleteNotice" class="hidden bg-red-50 text-red-700 p-4 rounded-xl text-sm border border-red-100">âš ï¸ <strong>ì‚­ì œ ìš”ì²­ ì•ˆë‚´</strong><br>ìµœì¢… ì‚­ì œ ì „ ì†Œìœ ì£¼ í™•ì¸ì„ ìœ„í•´ ê¸°ì¬í•˜ì‹  ì—°ë½ì²˜ë¡œ í™•ì¸ ì „í™”ë¥¼ ë“œë¦½ë‹ˆë‹¤.</div>
                </div>

                <div id="landingPageForm" class="space-y-6 hidden">
                    <h3 class="text-xl font-bold text-indigo-800 pb-2 border-b border-indigo-100">ğŸŒ ëœë”©í˜ì´ì§€ ì œì‘ ìš”ì²­</h3>
                    <p class="text-sm text-gray-500 bg-indigo-50 p-4 rounded-xl">
                        ëœë”©í˜ì´ì§€ ì œì‘ì— í•„ìš”í•œ ê¸°ì´ˆ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.<br>
                        ì •ë³´ê°€ ì—†ëŠ” í•­ëª©ì€ ê³µë€ìœ¼ë¡œ ë¹„ì›Œë‘ì…”ë„ ë©ë‹ˆë‹¤.
                    </p>
                    
                    <div><label class="block text-sm font-bold text-gray-700 mb-2">ì—…ì²´ëª… <span class="text-red-500">*</span></label><input type="text" name="landingBusinessName" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none" placeholder="ìƒí˜¸ëª…ì„ ì…ë ¥í•˜ì„¸ìš”"></div>
                    <div><label class="block text-sm font-bold text-gray-700 mb-2">ëŒ€í‘œì ì„±í•¨ <span class="text-red-500">*</span></label><input type="text" name="landingOwner" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none" placeholder="ëŒ€í‘œì ì„±í•¨"></div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">ì‚¬ì—…ì¥ ì£¼ì†Œ <span class="text-red-500">*</span></label>
                        <input type="text" name="landingAddress" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none" placeholder="Google Maps ê²€ìƒ‰ ê°€ëŠ¥í•œ ì£¼ì†Œ">
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div><label class="block text-sm font-bold text-gray-700 mb-2">ì—°ë½ì²˜ <span class="text-red-500">*</span></label><input type="tel" name="landingPhone" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none"></div>
                        <div><label class="block text-sm font-bold text-gray-700 mb-2">ì´ë©”ì¼ <span class="text-red-500">*</span></label><input type="email" name="landingEmail" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none"></div>
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">í™ˆí˜ì´ì§€ ì£¼ì†Œ <span class="text-gray-400 font-normal">(ì„ íƒ)</span></label>
                        <input type="url" name="landingWebsite" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none" placeholder="https://...">
                        <p class="text-xs text-gray-400 mt-1">ì •ë³´ê°€ ì—†ìœ¼ë©´ ë¹„ì›Œë‘ì…”ë„ ë©ë‹ˆë‹¤.</p>
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">SNS ì£¼ì†Œ (ì¸ìŠ¤íƒ€/ìœ íŠœë¸Œ/í‹±í†¡ ë“±) <span class="text-gray-400 font-normal">(ì„ íƒ)</span></label>
                        <input type="text" name="landingSNS" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none" placeholder="ì—¬ëŸ¬ ê°œì¸ ê²½ìš° ì‰¼í‘œ(,)ë¡œ êµ¬ë¶„í•´ì£¼ì„¸ìš”">
                        <p class="text-xs text-gray-400 mt-1">ì •ë³´ê°€ ì—†ìœ¼ë©´ ë¹„ì›Œë‘ì…”ë„ ë©ë‹ˆë‹¤.</p>
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">ì¹´ì¹´ì˜¤í†¡ ID / ì˜¤í”ˆì±„íŒ… URL <span class="text-gray-400 font-normal">(ì„ íƒ)</span></label>
                        <input type="text" name="landingKakao" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none">
                        <p class="text-xs text-gray-400 mt-1">ì •ë³´ê°€ ì—†ìœ¼ë©´ ë¹„ì›Œë‘ì…”ë„ ë©ë‹ˆë‹¤.</p>
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">ì—…ì²´ ëŒ€í‘œ ì‚¬ì§„ <span class="text-red-500">*</span> <span class="text-gray-400 font-normal">(ìµœëŒ€ 3ì¥)</span></label>
                        <div class="relative border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:bg-gray-50 transition cursor-pointer group">
                            <input type="file" name="landingImages" multiple accept="image/*" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" onchange="previewLandingFiles(this)">
                            <div id="landingUploadPlaceholder">
                                <svg class="w-10 h-10 text-gray-400 mx-auto mb-2 group-hover:text-purple-500 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                                <p class="text-sm text-gray-500">ë§¤ì¥ ì •ë©´, ë©”ë‰´, ë¡œê³ , í”„ë¡œí•„ ë“±<br>ìµœëŒ€ 3ì¥ê¹Œì§€ ì„ íƒí•˜ì„¸ìš”</p>
                            </div>
                            <div id="landingImagePreviewBox" class="hidden flex gap-2 justify-center mt-2 flex-wrap"></div>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">í™ë³´ ë¬¸êµ¬ (ìŠ¬ë¡œê±´) <span class="text-red-500">*</span></label>
                        <input type="text" name="landingCatchphrase" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none" placeholder="ì˜ˆ: ì •ì„±ì„ ë‹´ì€ ì§‘ë°¥, ì—„ë§ˆì˜ ì†ë§›">
                    </div>

                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">ìƒì„¸ ì†Œê°œ ë° ìš”ì²­ì‚¬í•­ <span class="text-red-500">*</span></label>
                        <textarea name="landingDetails" rows="5" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500" placeholder="ì—…ì²´ì˜ íŠ¹ì§•, ë©”ë‰´, ê°•ì¡°í•˜ê³  ì‹¶ì€ ë‚´ìš© ë“±ì„ ììœ ë¡­ê²Œ ì ì–´ì£¼ì„¸ìš”. ì°¸ê³ í• ë§Œí•œ ì‚¬ì´íŠ¸ê°€ ìˆë‹¤ë©´ URLì„ ì ì–´ì£¼ì…”ë„ ì¢‹ìŠµë‹ˆë‹¤."></textarea>
                    </div>
                </div>

                <div class="mt-8"><button type="submit" class="w-full gradient-bg text-white py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl hover:opacity-95 transition transform active:scale-95">ì œì¶œí•˜ê¸°</button></div>
            </form>
        </div>
    </div>
    <script>
        // [ì¤‘ìš”] ì•±ìŠ¤í¬ë¦½íŠ¸ ë°°í¬ URL (ê¸°ì¡´ URL ìœ ì§€)
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbx7QBBKklyOcVDPAHOCBc7sVGf9_u1LSTC12NmquZkHOZYBh0U_Lw8q1qfWLctHLNvZ/exec"; 
        
        function initTimeOptions() {
            const hours = Array.from({length: 12}, (_, i) => i + 1);
            const minutes = ['00', '10', '20', '30', '40', '50'];
            ['openHour', 'closeHour'].forEach(name => {
                const el = document.querySelector(`select[name="${name}"]`);
                if(el) { el.innerHTML = ''; hours.forEach(h => el.add(new Option(h, h))); }
            });
            ['openMinute', 'closeMinute'].forEach(name => {
                const el = document.querySelector(`select[name="${name}"]`);
                if(el) { el.innerHTML = ''; minutes.forEach(m => el.add(new Option(m, m))); }
            });
            if(document.querySelector(`select[name="openHour"]`)) document.querySelector(`select[name="openHour"]`).value = "10";
            if(document.querySelector(`select[name="closeHour"]`)) document.querySelector(`select[name="closeHour"]`).value = "8";
        }
        function handleEditClick(e) { e.preventDefault(); document.getElementById('warningModal').classList.remove('hidden'); }
        function closeModal(confirm) {
            document.getElementById('warningModal').classList.add('hidden');
            if (confirm) { document.getElementById('optionEdit').checked = true; switchTab('edit'); } 
            else { if(!document.getElementById('optionEdit').checked) document.getElementById('optionNew').checked = true; }
        }
        
        document.getElementById('optionNew').addEventListener('change', () => switchTab('new'));
        document.getElementById('optionLanding').addEventListener('change', () => switchTab('landing'));

        function switchTab(mode) {
            const newForm = document.getElementById('newRegistrationForm');
            const editForm = document.getElementById('editRequestForm');
            const landingForm = document.getElementById('landingPageForm');
            
            newForm.classList.add('hidden');
            editForm.classList.add('hidden');
            landingForm.classList.add('hidden');

            if (mode === 'new') { 
                newForm.classList.remove('hidden'); 
            } else if (mode === 'edit') { 
                editForm.classList.remove('hidden'); 
            } else if (mode === 'landing') {
                landingForm.classList.remove('hidden');
            }
            setRequired(mode);
        }

        function toggleEditType() {
            const type = document.querySelector('input[name="editType"]:checked').value;
            const modifyBox = document.getElementById('modifyDetails');
            const deleteBox = document.getElementById('deleteNotice');
            const reqText = document.querySelector('textarea[name="modifyRequest"]');
            if (type === 'modify') { modifyBox.classList.remove('hidden'); deleteBox.classList.add('hidden'); reqText.required = true; } 
            else { modifyBox.classList.add('hidden'); deleteBox.classList.remove('hidden'); reqText.required = false; }
        }

        function setRequired(mode) {
            const inputs = document.querySelectorAll('input, select, textarea');
            inputs.forEach(el => el.required = false);
            
            if (mode === 'new') {
                const reqNames = ['businessName', 'address', 'openHour', 'openMinute', 'closeHour', 'closeMinute', 'industry', 'mainService', 'phone'];
                reqNames.forEach(name => { const el = document.querySelector(`[name="${name}"]`); if(el) el.required = true; });
            } else if (mode === 'edit') {
                const reqNames = ['editBusinessName', 'editAddress', 'editOwner', 'editPhone', 'editEmail'];
                reqNames.forEach(name => { const el = document.querySelector(`[name="${name}"]`); if(el) el.required = true; });
                toggleEditType(); 
            } else if (mode === 'landing') {
                const reqNames = ['landingBusinessName', 'landingOwner', 'landingAddress', 'landingPhone', 'landingEmail', 'landingCatchphrase', 'landingDetails'];
                reqNames.forEach(name => { const el = document.querySelector(`[name="${name}"]`); if(el) el.required = true; });
            }
        }

        function previewFile(input) {
            const preview = document.getElementById('imagePreview');
            const placeholder = document.getElementById('uploadPlaceholder');
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) { preview.src = e.target.result; preview.classList.remove('hidden'); placeholder.classList.add('hidden'); }
                reader.readAsDataURL(input.files[0]);
            }
        }

        function previewLandingFiles(input) {
            const previewBox = document.getElementById('landingImagePreviewBox');
            const placeholder = document.getElementById('landingUploadPlaceholder');
            
            if (input.files && input.files.length > 0) {
                if (input.files.length > 3) {
                    alert('ìµœëŒ€ 3ì¥ê¹Œì§€ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
                    input.value = ''; 
                    return;
                }

                previewBox.innerHTML = ''; 
                previewBox.classList.remove('hidden');
                placeholder.classList.add('hidden');

                Array.from(input.files).forEach(file => {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const img = document.createElement('img');
                        img.src = e.target.result;
                        img.className = 'w-20 h-20 object-cover rounded-lg shadow-sm';
                        previewBox.appendChild(img);
                    }
                    reader.readAsDataURL(file);
                });
            } else {
                previewBox.classList.add('hidden');
                placeholder.classList.remove('hidden');
            }
        }

        function forceCloseWindow() {
            window.open('','_self').close(); window.close();
            setTimeout(() => { document.getElementById('successModal').classList.add('hidden'); location.reload(); }, 500);
        }

        const readFiles = (files) => {
            return Promise.all(Array.from(files).map(file => {
                return new Promise((resolve, reject) => {
                    const reader = new FileReader();
                    reader.onload = e => resolve({
                        data: e.target.result,
                        name: file.name,
                        type: file.type
                    });
                    reader.onerror = reject;
                    reader.readAsDataURL(file);
                });
            }));
        };

        document.getElementById('mainForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const loading = document.getElementById('loadingOverlay');
            loading.classList.remove('hidden'); loading.classList.add('flex');
            const mode = document.querySelector('input[name="mainOption"]:checked').value;
            const formData = { formType: mode };

            try {
                if (mode === 'new') {
                    formData.businessName = document.querySelector('[name="businessName"]').value;
                    formData.address = document.querySelector('[name="address"]').value;
                    formData.industry = document.querySelector('[name="industry"]').value;
                    formData.mainService = document.querySelector('[name="mainService"]').value;
                    formData.phone = document.querySelector('[name="phone"]').value;
                    formData.email = document.querySelector('[name="email"]').value;
                    formData.website = document.querySelector('[name="website"]').value;
                    formData.kakao = document.querySelector('[name="kakao"]').value;
                    const oh = document.querySelector('[name="openHour"]').value;
                    const om = document.querySelector('[name="openMinute"]').value;
                    const op = document.querySelector('[name="openPeriod"]').value;
                    const ch = document.querySelector('[name="closeHour"]').value;
                    const cm = document.querySelector('[name="closeMinute"]').value;
                    const cp = document.querySelector('[name="closePeriod"]').value;
                    formData.businessHours = `${oh}:${om} ${op} ~ ${ch}:${cm} ${cp}`;
                    
                    const fileInput = document.querySelector('input[name="image"]');
                    if (fileInput.files.length > 0) {
                        const fileData = await readFiles(fileInput.files);
                        formData.imageData = fileData[0].data; 
                        formData.imageMimeType = fileData[0].type;
                    } else {
                        throw new Error('í™ë³´ ì´ë¯¸ì§€ë¥¼ ë“±ë¡í•´ì£¼ì„¸ìš”.');
                    }
                    await submitToGAS(formData);

                } else if (mode === 'edit') {
                    formData.editType = document.querySelector('input[name="editType"]:checked').value;
                    formData.businessName = document.querySelector('[name="editBusinessName"]').value;
                    formData.address = document.querySelector('[name="editAddress"]').value;
                    formData.owner = document.querySelector('[name="editOwner"]').value;
                    formData.phone = document.querySelector('[name="editPhone"]').value;
                    formData.email = document.querySelector('[name="editEmail"]').value;
                    formData.modifyRequest = document.querySelector('[name="modifyRequest"]').value;
                    await submitToGAS(formData);

                } else if (mode === 'landing') {
                    formData.businessName = document.querySelector('[name="landingBusinessName"]').value;
                    formData.owner = document.querySelector('[name="landingOwner"]').value;
                    formData.address = document.querySelector('[name="landingAddress"]').value; 
                    formData.phone = document.querySelector('[name="landingPhone"]').value;
                    formData.email = document.querySelector('[name="landingEmail"]').value;
                    formData.website = document.querySelector('[name="landingWebsite"]').value; 
                    formData.sns = document.querySelector('[name="landingSNS"]').value; 
                    formData.kakao = document.querySelector('[name="landingKakao"]').value; 
                    formData.catchphrase = document.querySelector('[name="landingCatchphrase"]').value;
                    formData.details = document.querySelector('[name="landingDetails"]').value;
                    
                    const fileInput = document.querySelector('input[name="landingImages"]');
                    if (fileInput.files.length > 0) {
                        if (fileInput.files.length > 3) throw new Error('ì‚¬ì§„ì€ ìµœëŒ€ 3ì¥ê¹Œì§€ë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
                        formData.landingImages = await readFiles(fileInput.files);
                    } else {
                        throw new Error('ì—…ì²´ ëŒ€í‘œ ì‚¬ì§„ì„ ìµœì†Œ 1ì¥ ë“±ë¡í•´ì£¼ì„¸ìš”.');
                    }
                    await submitToGAS(formData);
                }
            } catch (err) {
                loading.classList.add('hidden');
                alert(err.message || 'ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        });

        async function submitToGAS(data) {
            try {
                await fetch(SCRIPT_URL, {
                    method: 'POST',
                    body: JSON.stringify(data),
                    mode: 'no-cors' 
                });
                document.getElementById('loadingOverlay').classList.add('hidden');
                const successModal = document.getElementById('successModal');
                const msgText = document.getElementById('successMessageText');
                msgText.innerText = "ì ‘ìˆ˜ê°€ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤."; 
                successModal.classList.remove('hidden');
                successModal.classList.add('flex');
                setTimeout(function() { forceCloseWindow(); }, 3000);
            } catch (err) {
                document.getElementById('loadingOverlay').classList.add('hidden');
                throw new Error('ì„œë²„ ì „ì†¡ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: ' + err);
            }
        }
        initTimeOptions();
        setRequired('new');
    </script>
</body>
</html>


